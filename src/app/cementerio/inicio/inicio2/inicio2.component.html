<div class="container-fluid">
    <div class="row col" style="height: 65px;">
        <mat-form-field appearance="outline">
            <mat-label>Buscar o filtrar por representante / fallecido</mat-label>
            <input matInput (keyup)="filtrarRepresentante($event)" placeholder="Nombre completo">
            <mat-icon matSuffix>person</mat-icon>
        </mat-form-field>
        <button mat-stroked-button> Buscar</button>

    </div>
    <div class="row">
        <div class="col">
            <div class="example-loading-shade" *ngIf="isLoadingR || isRateLimitReachedR">
                <mat-spinner *ngIf="isLoadingR"></mat-spinner>
                <div class="example-rate-limit-reached" *ngIf="isRateLimitReachedR">
                    Se ha alcanzado el límite de la tasa API de SIC. Se restablecerá en un minuto.
                </div>
            </div>
            <div class="mat-elevation-z2">
                <table #table mat-table [dataSource]="representantes" matSort matSortActive="nombre" matSortDisableClear matSortDirection="desc">
                    <ng-container matColumnDef="nombre">
                        <th mat-header-cell *matHeaderCellDef mat-sort-header disableClear> nombre </th>
                        <td mat-cell *matCellDef="let element"> {{element.nombre}} </td>
                    </ng-container>
                    <ng-container matColumnDef="cedula">
                        <th mat-header-cell *matHeaderCellDef> cédula </th>
                        <td mat-cell *matCellDef="let element"> {{element.cedula}} </td>
                    </ng-container>

                    <tr mat-header-row *matHeaderRowDef="columnsToDisplayR"></tr>
                    <tr mat-row *matRowDef="let row; columns: columnsToDisplayR;" (click)="verSitiosRepresentante(row);" [ngClass]="{'item-seleccionado': representante?.id === row.id}"></tr>
                </table>
                <mat-paginator [length]="resultsLength" [pageSize]="5"></mat-paginator>
            </div>
        </div>
        <div class="col">
            <div class="example-loading-shade" *ngIf="isLoadingS || isRateLimitReachedS">
                <mat-spinner *ngIf="isLoadingS"></mat-spinner>
                <div class="example-rate-limit-reached" *ngIf="isRateLimitReachedS">
                    Se ha alcanzado el límite de la tasa API de SIC. Se restablecerá en un minuto.
                </div>
            </div>
            <table mat-table [dataSource]="sitios" class="mat-elevation-z2">
                <ng-container matColumnDef="sector">
                    <th mat-header-cell *matHeaderCellDef> sector </th>
                    <td mat-cell *matCellDef="let element"> {{element.sector}} </td>
                </ng-container>
                <ng-container matColumnDef="tipo">
                    <th mat-header-cell *matHeaderCellDef> tipo </th>
                    <td mat-cell *matCellDef="let element"> {{element.tipo}} </td>
                </ng-container>
                <ng-container matColumnDef="descripcion">
                    <th mat-header-cell *matHeaderCellDef> descripcion </th>
                    <td mat-cell *matCellDef="let element"> {{element.descripcion}} </td>
                </ng-container>
                <ng-container matColumnDef="adquisicion">
                    <th mat-header-cell *matHeaderCellDef> fecha </th>
                    <td mat-cell *matCellDef="let element"> {{element.adquisicion | date : 'd MMM, y':undefined:locale}} </td>
                </ng-container>

                <tr mat-header-row *matHeaderRowDef="columnsToDisplayS"></tr>
                <tr mat-row *matRowDef="let row; columns: columnsToDisplayS;" (click)="verRegistrosSitioRepresentante(row);" [ngClass]="{'item-seleccionado': sitio?.id === row.id}"></tr>
            </table>
        </div>
        <div class="col">
            <div class="mat-elevation-z2" style="background-color: white;">
                <mat-tab-group mat-stretch-tabs>
                    <mat-tab label="Estado de cuenta">
                        <ng-template matTabContent>
                            <div class="example-loading-shade" *ngIf="isLoadingEC || isRateLimitReachedEC">
                                <mat-spinner *ngIf="isLoadingEC"></mat-spinner>
                                <div class="example-rate-limit-reached" *ngIf="isRateLimitReachedEC">
                                    Se ha alcanzado el límite de la tasa API de SIC. Se restablecerá en un minuto.
                                </div>
                            </div>
                            <table mat-table [dataSource]="estadoCuentaEC">
                                <ng-container [matColumnDef]="column" *ngFor="let column of columnsToDisplayEC">
                                    <th mat-header-cell *matHeaderCellDef> {{column}} </th>
                                    <td mat-cell *matCellDef="let element"> {{element[column]}} </td>
                                </ng-container>

                                <tr mat-header-row *matHeaderRowDef="columnsToDisplayEC"></tr>
                                <tr mat-row *matRowDef="let row; columns: columnsToDisplayEC;"></tr>
                            </table>
                            <mat-paginator [pageSizeOptions]="[5]" showFirstLastButtons></mat-paginator>
                        </ng-template>
                    </mat-tab>
                    <mat-tab label="Registro de Fallecidos">
                        <ng-template matTabContent>
                            <div class="example-loading-shade" *ngIf="isLoadingF || isRateLimitReachedF">
                                <mat-spinner *ngIf="isLoadingF"></mat-spinner>
                                <div class="example-rate-limit-reached" *ngIf="isRateLimitReachedF">
                                    Se ha alcanzado el límite de la tasa API de SIC. Se restablecerá en un minuto.
                                </div>
                            </div>
                            <table mat-table [dataSource]="fallecidos">
                                <ng-container [matColumnDef]="column" *ngFor="let column of columnsToDisplayF">
                                    <th mat-header-cell *matHeaderCellDef> {{column}} </th>
                                    <td mat-cell *matCellDef="let element"> {{element[column]}} </td>
                                </ng-container>

                                <tr mat-header-row *matHeaderRowDef="columnsToDisplayF"></tr>
                                <tr mat-row *matRowDef="let row; columns: columnsToDisplayF;"></tr>
                            </table>
                        </ng-template>
                    </mat-tab>
                </mat-tab-group>
            </div>
        </div>
    </div>
</div>
