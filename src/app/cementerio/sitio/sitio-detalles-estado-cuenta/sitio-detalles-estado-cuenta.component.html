<h4>
    Estado de cuenta - Sitio N° {{id_sitio}}
</h4>
<div class="mat-elevation-z1">
    <table mat-table [dataSource]="dataSource">

        <ng-container matColumnDef="fecha">
            <th mat-header-cell *matHeaderCellDef> Fecha </th>
            <td mat-cell *matCellDef="let row"> {{row.fecha | date : 'MMM d, y':undefined:locale}}</td>
        </ng-container>

        <ng-container matColumnDef="descripcion">
            <th mat-header-cell *matHeaderCellDef> Motivo </th>
            <td mat-cell *matCellDef="let row"> {{row.descripcion}}</td>
        </ng-container>

        <ng-container matColumnDef="desde">
            <th mat-header-cell *matHeaderCellDef> Año </th>
            <td mat-cell *matCellDef="let row"> {{row.desde | date : 'MMM d, y':undefined:locale}} </td>
        </ng-container>

        <ng-container matColumnDef="cargos">
            <th mat-header-cell *matHeaderCellDef> Cargos </th>
            <td mat-cell *matCellDef="let row" [style.color]="row.desde
        < '2001/01/01' ? 'blue': 'red'">{{ row.estado_cuenta !='deuda' ? '' : row.cantidad | currency}} {{row.desde
                < '2001/01/01' ? '(sucres)': ''}} </td>
        </ng-container>

        <ng-container matColumnDef="abonos">
            <th mat-header-cell *matHeaderCellDef> Abonos </th>
            <td mat-cell *matCellDef="let row" [style.color]="row.desde
      < '2001/01/01' ? 'blue': 'green'"> {{ row.estado_cuenta =='deuda' ? '' : row.cantidad | currency}} {{row.desde
                < '2001/01/01' ? '(sucres)': ''}} </td>
        </ng-container>

        <ng-container matColumnDef="acciones">
            <th mat-header-cell *matHeaderCellDef> </th>
            <td mat-cell *matCellDef="let row">
                <div style="display: flex; flex-direction: row;">
                    <button mat-icon-button matTooltip="Editar"><mat-icon [style.color]="row.hovered? 'gray':'white'">edit</mat-icon></button>
                    <button mat-icon-button matTooltip="Eliminar"><mat-icon [style.color]="row.hovered? 'gray':'white'">delete</mat-icon></button>
                </div>
            </td>
        </ng-container>

        <ng-container matColumnDef="header-row-cero-grupo_0">
            <th mat-header-cell *matHeaderCellDef [attr.colspan]="3"></th>
        </ng-container>
        <ng-container matColumnDef="header-row-uno-grupo_0">
            <th mat-header-cell *matHeaderCellDef [attr.colspan]="2">Abonos extras:</th>
        </ng-container>
        <ng-container matColumnDef="header-row-dos-grupo_0">
            <th mat-header-cell *matHeaderCellDef [attr.colspan]="2" style="color: 'green';">{{getPagosExtras() | currency}}</th>
        </ng-container>

        <ng-container matColumnDef="header-row-cero-grupo_1">
            <th mat-header-cell *matHeaderCellDef [attr.colspan]="3"></th>
        </ng-container>
        <ng-container matColumnDef="header-row-uno-grupo_1">
            <th mat-header-cell *matHeaderCellDef [attr.colspan]="2">Abonos servicios:</th>
        </ng-container>
        <ng-container matColumnDef="header-row-dos-grupo_1">
            <th mat-header-cell *matHeaderCellDef [attr.colspan]="2" style="color: 'green';">{{getPagosServicios() | currency}}</th>
        </ng-container>

        <ng-container matColumnDef="header-row-cero-grupo_2">
            <th mat-header-cell *matHeaderCellDef [attr.colspan]="3"></th>
        </ng-container>
        <ng-container matColumnDef="header-row-uno-grupo_2">
            <th mat-header-cell *matHeaderCellDef [attr.colspan]="2">Saldo servicios:</th>
        </ng-container>
        <ng-container matColumnDef="header-row-dos-grupo_2">
            <th mat-header-cell *matHeaderCellDef [attr.colspan]="2" style="color: 'red';">{{getTotalEstadoCuenta() | currency}}</th>
        </ng-container>

        <tr mat-header-row *matHeaderRowDef="['header-row-cero-grupo_0', 'header-row-uno-grupo_0', 'header-row-dos-grupo_0']; sticky: true"></tr>
        <tr mat-header-row *matHeaderRowDef="['header-row-cero-grupo_1', 'header-row-uno-grupo_1', 'header-row-dos-grupo_1']; sticky: true"></tr>
        <tr mat-header-row *matHeaderRowDef="['header-row-cero-grupo_2', 'header-row-uno-grupo_2', 'header-row-dos-grupo_2']; sticky: true"></tr>

        <tr mat-header-row *matHeaderRowDef="displayedColumnsEC; sticky: true"></tr>
        <tr mat-row *matRowDef="let row; columns: displayedColumnsEC;" (mouseover)="row.hovered = true" (mouseout)="row.hovered = false"></tr>

    </table>
    <mat-paginator class="mat-paginator-sticky2" [pageSizeOptions]="[ 5, 10, 25]" showFirstLastButtons></mat-paginator>

</div>
